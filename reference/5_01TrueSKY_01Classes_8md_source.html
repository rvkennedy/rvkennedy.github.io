---
title: Simul/PRODUCTS/TrueSky/Help/5 TrueSKY Classes.md Source File
layout: reference
url: Simul/PRODUCTS/TrueSky/Help/5 TrueSKY Classes.md Source File
---
<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>trueSKY: Simul/PRODUCTS/TrueSky/Help/5 TrueSKY Classes.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Simul/PRODUCTS/TrueSky/Help/5 TrueSKY Classes.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# 5 The trueSKY Classes    {#man_5_classes} #</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;If you include the trueSKY headers, you can use the rendering classes directly.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;This will usually involve creating an instance of simul::clouds::Environment to store the data and an instance of simul::clouds::BaseWeatherRenderer to draw the sky.</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;\subpage man_5_classes_ooo1_environment</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;\subpage man_5_classes_ooo2_shaders</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;\subpage man_5_classes_ooo3_mixed</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;The renderer classes are in the Clouds and Sky libraries.</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;To build the samples, use the solution file appropriate to your Visual Studio version:</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;   - SimulSamples_Win32_VC10.sln</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;   - SimulSamples_x64_VC11.sln</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;\image html &quot;SimulOverview.png&quot;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;The two main elements to implementing trueSKY in a project are: an Environment object, which will encapsulate sky and cloud data;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; a WeatherRenderer, and a RenderPlatform.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;You should create an instance of simul::clouds::Environment, which is persistent.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;   #include &quot;Simul/LicenseKey.h&quot;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;   #include &quot;Simul/Base/EnvironmentVariables.h&quot;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;   simul::clouds::Environment *environment=NULL;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;Apply your trueSKY licence key (see \ref man_a_licensing for more details), and initialize the Environment instance:</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;~~~~~~~~~~~~~~~{.c}</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;   simul::base::SetLicence(SIMUL_LICENSE_KEY);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;   environment=new simul::clouds::Environment();</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;The Environment is API-neutral, it calculates and updates environment data. We will create a persistent \link simul::crossplatform::RenderPlatform RenderPlatform\endlink,</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;whose class depends on the graphics API we use:</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;~~~~~~~~~~~~~~~{.c}</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;   simul::dx11::RenderPlatform renderPlatformDx11;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;The RenderPlatform classes implement platform-specific rendering functions called from a cross-platform interface.</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;And we will create a weather renderer, which is also API-neutral:</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;~~~~~~~~~~~~~~~{.c}</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;   simul::clouds::BaseWeatherRenderer *weatherRenderer=new simul::clouds::BaseWeatherRenderer(environment);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;In the case of</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;DirectX 11, we initialize the RenderPlatform with a pointer to our ID3D11Device:</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;~~~~~~~~~~~~~~~{.c}</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;   void OnD3D11CreateDevice(struct ID3D11Device* pd3dDevice)</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;       renderPlatformDx11.RestoreDeviceObjects(pd3dDevice);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;Having done this, we can now pass the render platform pointer to the device-specific initialization of our renderers:</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;~~~~~~~~~~~~~~~{.c}</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;       weatherRenderer-&gt;RestoreDeviceObjects(&amp;renderPlatformDx11);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;In-game, we update the environment, usually once per frame:</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;~~~~~~~~~~~~~~~{.c}</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   environment-&gt;update(time_step_days);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;The time step is given in days - a floating point value, usually some small fraction less than one.</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;This is the simulation time step, rather than real-time.</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;Then to render:</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   void Render(ID3D11DeviceContext* pContext)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;       simul::crossplatform::DeviceContext deviceContext;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;       deviceContext.platform_context              =pContext;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;       deviceContext.renderPlatform                =&amp;renderPlatformDx11;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;       deviceContext.viewStruct.view_id            =view_id;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;       deviceContext.viewStruct.depthTextureStyle  =crossplatform::PROJECTION;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;       deviceContext.viewStruct.view               =viewMatrix;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;       deviceContext.viewStruct.proj               =projectionMatrix;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;We&#39;ve created a \link simul::crossplatform::DeviceContext deviceContext\endlink object that we will pass to the render functions.</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;This object encapsulates the platform-specific context - in this case it&#39;s</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;an ID3D11DeviceContext pointer - and view-specific information: the view and projection matrices for example.</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;There are different types of projection matrix, and some are better than others. The classic projection transforms a viewspace position </div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;into a clip position and depth value, where depth=0 is the near plane and depth=1 is the far. But this forward projection has</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;a very inefficient distribution of depth values with respect to distance, and causes a loss of precision. Superior to this is the reverse</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;projection, where depth=0 represents the far plane, and depth=1 the near. It&#39;s strongly recommended that you use reverse projection to get the best</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;visual results from trueSKY. The projection matrix that you send to trueSKY should be the same one that was used to create your depth buffer.</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;Each individual view that you want to draw simultaneously on screen should have its own unique view_id.</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;You don&#39;t have to explicitly create views, but you should call:</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   weatherRenderer-&gt;RemoveView(view_id);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;to free up GPU memory if a view is removed.</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;We specify the depth texture style so that trueSKY knows how to interpret the</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;depth information you pass to it. The matrices (\link simul::math::Matrix4x4 Matrix4x4\endlink) are row-major view and projection matrices stored as a simple block of 16 floats - you can cast from most standard matrix classes directly.</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;Once per frame, before rendering , we must call \link simul::clouds::BaseWeatherRenderer::PreRenderUpdate PreRenderUpdate\endlink, passing</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;a deviceContext that refers to \em main \em view.</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   weatherRenderer-&gt;PreRenderUpdate(deviceContext,real_time_s);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;The parameter *real_time_s* is real time in seconds - as distinct from simulation time, which might be greatly accelerated, or change instantly, real time is used mainly for effects like rain that we might not want to appear accelerated. </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;For each view, we render the sky, passing an appropriate device context.</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   weatherRenderer-&gt;Render(deviceContext,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                           ,(bool)is_cubemap</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                           ,(float) exposure</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                           ,(float) gamma</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                           ,mainDepthTexture</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                           ,depthViewport);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;The *exposure* is a brightness multiplier - 1.0 is a good value,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;but the chosen number depends on how bright you want the sky to be relative to your scene. We can also perform *gamma* correction.</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;We use *is_cubemap* to specify whether we&#39;re doing a cubemap render. If so,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;shortcuts will be used to draw with less detail. We pass a depth texture, because the atmospherics and clouds need to use this.</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;The *depthViewport* specifies what area of the texture is being used for the current view (some engines store a larger texture and use a portion of it): pass NULL here to use the entire texture.</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;See also \link man_5_classes_ooo3_mixed Mixed Resolution Rendering\endlink.</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;Platform considerations</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;=======================</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;DirectX 11</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;----------</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;To use DirectX 11, build the DirectX11 platform library in Simul/Platform/DirectX11.</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;The DirectX platform library used the DirectX SDK by default, but can be recompiled from the provided source to run on the Windows 8 SDK.</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;The location of the most recent DirectX SDK on your hard drive is usually given by the</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;DXSDK_DIR environment variable - it is usually of the form &#39;C:/Program Files (x86)/Microsoft DirectX SDK (June 2010)&#39; etc.</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;To build with the Windows 8 SDK, ensure that both the DirectX11 library and the executable are using the standard toolset (e.g. v110, not v110_xp), remove the</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;SimulDXSDK.props property sheet from the projects, then add the SimulWin8SDK.props property sheet to both projects. Rebuild Simul/Platform/DirectX11 and the executable.</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;To add True Sky to a DirectX 11 project, you need to link with the Simul core libraries, and also with the DirectX11 project. You can use the Simul property</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;sheets - e.g. Simul/Platform/DirectX/SimulUseDXSDK.props, alternatively:</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;* In the project properties, select Configuration:All, then under &quot;Configuration Properties, C++, General&quot; add the following to &quot;Additional Include Directories&quot;:</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   $(SIMUL)/../;$(DXSDK_DIR)/include</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;The SIMUL environment variable is set by the trueSKY installer, while the DXSDK_DIR variable is set when you install DirectX.</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;* Under &quot;Configuration Properties, Linker, General&quot; set &quot;Additional Library Directories&quot; to:</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;$(SIMUL)/lib/$(Platform)/VC11/$(Configuration);$(DXSDK_DIR)/Lib/x86</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;where VC11 should be replaced by VC12 etc for different Visual Studio versions, and x86 by x64 for 64-bit builds.</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;* In your initialization code, setup file loading and paths if needed, before creating the weather renderer:</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   simul::dx11::SetFileLoader(myFileLoader);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   simul::dx11::PushShaderPath(&quot;my_shader_path&quot;);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   simul::dx11::PushTexturePath(&quot;my_texture_path&quot;);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   simul::dx11::SetShaderBinaryPath(&quot;my_binary_path&quot;);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;For example, the DirectX11 sample uses the default file loader, and the paths to shaders in &quot;Simul/Platform/DirectX11/HLSL&quot; and textures in &quot;Simul/Media/Textures&quot;.</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;OpenGL</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;------</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;In order to build the OpenGL sample you will need GLUT, and GLEW (both included in Simul/External). GLSL is used for shaders.</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;You should build the OpenGL platform library in Simul/Platform/OpenGL.</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;To add True Sky to an OpenGL project:</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;* In the project properties, select Configuration:All, then under &quot;Configuration Properties, C++, General&quot; add the following &quot;Additional Include Directories&quot;:</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   &quot;$(SIMUL)/../&quot;;&quot;$(SIMUL)/External/OpenGL/include&quot;;&quot;$(SIMUL)/External/FreeImage/Dist&quot;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;* Under &quot;Configuration Properties, Linker, General&quot; set &quot;Additional Library Directories&quot; to:</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   &quot;$(SIMUL)/lib/$(PlatformName)/VC11/$(ConfigurationName)&quot;;&quot;$(SIMUL)/External/OpenGL/lib&quot;;&quot;$(SIMUL)/External/FreeImage/Dist&quot;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;* The libraries themselves are linked automatically when the headers are included.</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;* On scene initialization, initialize the shader path and the weather object:</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;~~~~~~~~~~~~~~~{.cpp}</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   simul::opengl::PushShaderPath(&quot;shaders/&quot;);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;&lt;hr size=&quot;1&quot;&gt;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;Next: \ref man_5_classes_ooo1_environment</div></div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/>
<address style="text-align: right;">trueSKY VERSION SIMUL_MAJOR_VERSION=4.0.0<small>
Fri Jul 29 2016 07:52:04</small></address>
</body>
</html>
